"use strict";var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t,e,n){n.vibrant||(n.vibrant={}),n.loadActivity=function(n){!function(n,a){var r="Austin";function o(e){t.csv("./data/"+e+"_Table.csv",function(e,n){if(e)throw e;n.sort(function(t,e){return+e.Employees-+t.Employees});var i=!0,a=t.select("#activity-table-wrapper");a.selectAll("*").remove();var r=a.append("div");r.append("input").attr("placeholder","Search by Description...").attr("type","text").attr("id","activity-table-search").on("keyup",function(){var e=this.value.trim().toLowerCase(),n=0;c.each(function(i){var a=t.select(this),r=-1!=i.Description.toLowerCase().indexOf(e);a.style("background",n%2?"#fff":"#eee").style("display",r?"table-row":"none"),r&&n++})});var o=a.append("table"),s=t.keys(n[0]),l=o.append("thead").append("tr").selectAll("th").data(s).enter().append("th").text(function(t){return t}).on("click",function(t,e){l.attr("class","header"),i?(1===e?c.sort(function(e,n){return e[t]<n[t]?-1:e[t]>n[t]?1:0}):c.sort(function(e,n){return+e[t].replace(/[^0-9]+/g,"")-+n[t].replace(/[^0-9]+/g,"")}),i=!1,this.className="aes"):(1===e?c.sort(function(e,n){return n[t]<e[t]?-1:n[t]>e[t]?1:0}):c.sort(function(e,n){return+n[t].replace(/[^0-9]+/g,"")-+e[t].replace(/[^0-9]+/g,"")}),i=!0,this.className="des"),o.selectAll("tr").style("background",function(t,e){return e%2?"#eee":"#fff"})}),c=o.append("tbody").selectAll("tr").data(n).enter().append("tr").style("background",function(t,e){return e%2?"#fff":"#eee"});c.selectAll("td").data(function(t){return s.map(function(e){return{value:t[e],name:e}})}).enter().append("td").attr("data-th",function(t){return t.name}).text(function(t){return t.value})})}function s(n){var a=e("#activity-bubble-wrapper").width()||960,r=e("#activity-bubble-wrapper").height()||430,o=12;t.text("./data/"+n+"_Bubbles.csv",function(e,n){if(e)throw e;var s="text,size,group\n"+n,l=t.csvParse(s);l.forEach(function(t){t.size=+t.size});var c=[];l.forEach(function(t){c.contains(t.group)||c.push(t.group)});for(var d=l.length,u=c.length,h=new Array(u),p=[],f=0;f<d;f++)p.push(g(l,f));function g(t,e){var n=c.indexOf(t[e].group),i=Math.sqrt((n+1)/u*-Math.log(Math.random()))*o,s={cluster:n,index:e,radius:.002*t[e].size,text:t[e].text,x:200*Math.cos(n/u*2*Math.PI)+a/2+Math.random(),y:200*Math.sin(n/u*2*Math.PI)+r/2+Math.random()};return(!h[n]||i>h[n].radius)&&(h[n]=s),s}new i({element:t.select("#activity-bubble-wrapper").node(),data:{nodes:p,links:[]}})})}e(".dropdown-visible").off().on("click",function(){e(".dropdown-hidden").toggleClass("visibility-visible")}),e(".dropdown-item").off().on("click",function(){r=e(this).data("value"),e(".dropdown-value").text(r),e(".dropdown-hidden").toggleClass("visibility-visible"),s(r),o(r)}),function(){var e=t.select("#activity-bubble-legend div");e.selectAll("*").remove();var n=e.append("div").attr("class","activity-bubble-legend-tooltip").style("visibility","hidden");[{src:"group1.jpg",tooltip:"Ag, Fishing, Hunting, & Forestry"},{src:"group2.jpg",tooltip:"Mining, Utilities, & Construction"},{src:"group3.jpg",tooltip:"Manufacturing"},{src:"group4.jpg",tooltip:"Wholesale, Transport, & Warehousing"},{src:"group5.jpg",tooltip:"Services"},{src:"group6.jpg",tooltip:"Education & Healthcare"},{src:"group7.jpg",tooltip:"Arts & Hospitality"},{src:"group8.jpg",tooltip:"Other"}].map(function(t,i){e.append("img").attr("src","img dump/"+t.src).attr("alt","legend").style("cursor","pointer").on("mouseover",function(){n.text(t.tooltip),n.style("visibility","visible")}).on("mousemove",function(){n.style("top",24*i+5+"px").style("right","40px")}).on("mouseout",function(){return n.style("visibility","hidden")})})}(),o(r),s(r),e.isFunction(a)&&a()}(0,n)},Array.prototype.contains=function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return!0;return!1};var i=function(){function e(n){_classCallCheck(this,e),this.data=n.data,this.element=n.element,this.color=t.scaleOrdinal().range(["#a6761d","#666666","#377eb8","#984ea3","#73c000","#ff7f00","#e31a1c","#e6ab02"]),this.draw()}return _createClass(e,[{key:"draw",value:function(){this.width=this.element.offsetWidth||400,this.height=this.element.offsetHeight||400,this.margin={top:0,right:10,bottom:0,left:0},this.width=this.width-(this.margin.left+this.margin.right),this.height=this.height-(this.margin.top+this.margin.bottom);var e=t.select(this.element);e.selectAll(".item").remove(),this.padding=e.node().getBoundingClientRect();var n=e.append("svg").attr("class","item").attr("width",this.width+(this.margin.left+this.margin.right)).attr("height",this.height+(this.margin.top+this.margin.bottom));this.container=n.append("g").attr("width",this.width).attr("height",this.height).attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.tooltip=e.append("div").attr("class","item activity-bubble-tooltip").style("visibility","hidden"),this.createBubbles(this.data)}},{key:"setData",value:function(t){this.data=t,this.draw()}},{key:"createBubbles",value:function(e){var n=this,i=this.tooltip,a=t.forceSimulation().force("link",t.forceLink().id(function(t){return t.index})).force("collide",t.forceCollide(function(t){return t.radius+1}).iterations(12)).force("charge",t.forceManyBody().strength(-1)).force("center",t.forceCenter(this.width/2,this.height/2)).force("y",t.forceY(0)).force("x",t.forceX(0)),r=this.container.append("g").attr("class","links").selectAll("line").data(e.links).enter().append("line").attr("stroke","transparent"),o=this.container.append("g").attr("class","nodes").selectAll(".node").data(e.nodes).enter().append("g").attr("class","node"),s=this.padding;o.append("circle").attr("r",function(t){return t.radius||0}).style("fill",function(t){return n.color(t.cluster)}).style("cursor","pointer").on("mouseover",function(t){i.text(t.text),i.style("visibility","visible")}).on("mousemove",function(e){s.top<=0?i.style("top",e.y+"px").style("left",t.event.pageX-s.left+10+"px"):i.style("top",t.event.pageY-s.top-10+"px").style("left",t.event.pageX-s.left+10+"px")}).on("mouseout",function(){return i.style("visibility","hidden")}).call(t.drag().on("start",function(e){t.event.active||a.alphaTarget(.3).restart(),i.style("visibility","hidden"),e.fx=e.x,e.fy=e.y}).on("drag",function(e){e.fx=t.event.x,e.fy=t.event.y}).on("end",function(e){t.event.active||a.alphaTarget(0),i.style("visibility","visible"),e.fx=null,e.fy=null})),o.append("text").attr("dy",".3em").style("fill","white").style("text-anchor","middle").style("cursor","default").style("pointer-events","none").text(function(t){return t.text.split(" ")[0].length>t.radius/3?"":t.text.substring(0,t.radius/3)});a.nodes(e.nodes).on("tick",function(){r.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),o.select("circle").attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}),o.select("text").attr("x",function(t){return t.x}).attr("y",function(t){return t.y})}),a.force("link").links(e.links)}}]),e}()}(d3,$,window),function(t,e,n){n.vibrant||(n.vibrant={}),n.loadLocal=function(a){!function(a,r){var o="Austin";function s(a){t.queue(2).defer(t.csv,"./data/"+a+"_Table.csv").defer(t.csv,"./data/"+a+"_Master_Traded.csv").await(function(a,r,o){if(a)throw a;var s=[],l=(o.reduce(function(t,e,n){return t[e.naics]=e,t},{}),r.reduce(function(t,e,n){return t[e.NAICS]=e,t},{}));o.map(function(t,e){s.push({Industry:t.Label,"Distance from Average":0,Employees:l[t.naics]?+l[t.naics].Employees:"","Relative Size (RS)":l[t.naics]?+l[t.naics]["Relative Size (RS)"]:""+e,"Local Trend":t.Pct_Total,"Natâ€™l Trend":t.Natl_Trend})}),s.sort(function(t,e){return+e.Employees-+t.Employees}),function(e){var n=!0,i=t.select("#local-table-wrapper");i.selectAll("*").remove();var a=i.append("table"),r=t.keys(e[0]),o=a.append("thead").append("tr").selectAll("th").data(r).enter().append("th").text(function(t){return t}).on("click",function(t,e){o.attr("class","header"),n?(0===e?s.sort(function(e,n){return e[t]<n[t]?-1:e[t]>n[t]?1:0}):s.sort(function(e,n){return+(e[t]+"").replace(/[^0-9]+/g,"")-+(n[t]+"").replace(/[^0-9]+/g,"")}),n=!1,this.className="aes"):(0===e?s.sort(function(e,n){return n[t]<e[t]?-1:n[t]>e[t]?1:0}):s.sort(function(e,n){return+(n[t]+"").replace(/[^0-9]+/g,"")-+(e[t]+"").replace(/[^0-9]+/g,"")}),n=!0,this.className="des"),a.selectAll("tr").style("background",function(t,e){return e%2?"#eee":"#fff"})}),s=a.append("tbody").selectAll("tr").data(e).enter().append("tr").style("background",function(t,e){return e%2?"#fff":"#eee"});s.selectAll("td").data(function(t){return r.map(function(e){return{value:t[e],name:e}})}).enter().append("td").attr("data-th",function(t){return t.name}).text(function(t){return t.value})}(s),s.sort(function(t,e){return+e["Relative Size (RS)"]-+t["Relative Size (RS)"]}),c=s.splice(0,10).concat(s.splice(s.length-10,s.length)),d=new i({element:document.querySelector("#local-bubble-wrapper"),data:c}),e(n).on("resize",function(){return d.draw()});var c,d})}e(".dropdown-visible").off().on("click",function(){e(".dropdown-hidden").toggleClass("visibility-visible")}),e(".dropdown-item").off().on("click",function(){o=e(this).data("value"),e(".dropdown-value").text(o),e(".dropdown-hidden").toggleClass("visibility-visible"),s(o)}),s(o),e.isFunction(r)&&r()}(0,a)};var i=function(){function e(n){_classCallCheck(this,e),this.data=n.data,this.element=n.element,this.color=t.scaleOrdinal(t.schemeCategory20),this.draw()}return _createClass(e,[{key:"draw",value:function(){this.width=this.element.offsetWidth||400,this.height=this.element.offsetHeight||400,this.margin={top:30,right:50,bottom:70,left:50},this.width=this.width-(this.margin.left+this.margin.right),this.height=this.height-(this.margin.top+this.margin.bottom);var e=t.select(this.element);e.selectAll(".item").remove(),this.padding=e.node().getBoundingClientRect();var n=e.append("svg").attr("class","item").attr("width",this.width+(this.margin.left+this.margin.right)).attr("height",this.height+(this.margin.top+this.margin.bottom));this.container=n.append("g").attr("width",this.width).attr("height",this.height).attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.tooltip=e.append("div").attr("class","item local-bubble-tooltip").style("visibility","hidden"),this.createBubbles(this.data)}},{key:"setData",value:function(t){this.data=t,this.draw()}},{key:"createBubbles",value:function(e){var n=this,i=this.tooltip,a=t.scaleBand().range([0,this.width]).padding(.1),r=t.scaleLinear().range([0,this.height]),o=t.scaleLinear().range([5,25]).domain(t.extent(e,function(t){return+t["Relative Size (RS)"]}));a.domain(e.map(function(t){return t.Industry})),r.domain([t.min(e,function(t){return-t["Relative Size (RS)"]}),t.max(e,function(t){return-t["Relative Size (RS)"]})]),this.container.append("line").style("stroke","#000").style("stroke-width","2px").attr("x1",0).attr("x2",this.width).attr("y1",r(-1)).attr("y2",r(-1)),this.container.append("text").attr("x",this.width+5).attr("y",r(-1)+4).text("RS = 1");var s=this.padding;this.container.selectAll(".bubble").data(e).enter().append("circle").attr("class","bubble").style("stroke","#000").style("stroke-width","0").style("fill",function(t,e){return n.color(e)}).attr("cy",function(t){return t["Relative Size (RS)"]>0?r(Math.min(0,-t["Relative Size (RS)"])):r(Math.min(0,-t["Relative Size (RS)"]))+Math.abs(r(t["Relative Size (RS)"])-r(0))}).attr("cx",function(t){return a(t.Industry)+a.bandwidth()/2}).attr("r",function(t,e){return o(t["Relative Size (RS)"])}).style("cursor","pointer").on("mouseover",function(t){i.html("<p>"+t.Industry+"</p><p>Relative Size: "+t["Relative Size (RS)"]+"</p><p>Employees: "+t.Employees+"</p>"),i.style("visibility","visible")}).on("mousemove",function(e){var n=e["Relative Size (RS)"]>0?r(Math.min(0,-e["Relative Size (RS)"])):r(Math.min(0,-e["Relative Size (RS)"]))+Math.abs(r(e["Relative Size (RS)"])-r(0));i.style("top",n+"px").style("left",t.event.pageX-s.left+10+"px")}).on("mouseout",function(){return i.style("visibility","hidden")})}}]),e}()}(d3,$,window),function(t,e,n){n.vibrant||(n.vibrant={}),n.loadSwot=function(n){!function(n,i){var a="Austin",r={strengths:{caption:"#4472c4",thead:"#8ea9db",tbody:"#d9e1f2"},weaknesses:{caption:"#ffc000",thead:"#ffd966",tbody:"#fff2cc"},opportunities:{caption:"#70ad47",thead:"#a9d08e",tbody:"#e2efda"},threats:{caption:"#ff0000",thead:"#ff7c80",tbody:"#ffcccc"}};function o(e,n){t.csv("./data/"+e+"_SWOT_"+n+".csv",function(e,i){if(e)throw e;var a=!0,o=t.select("#swot-"+n+"-wrapper");o.selectAll("table").remove();var s=o.append("table"),l=t.keys(i[0]);s.append("caption").text(n.toUpperCase()).style("background",r[n].caption);var c=s.append("thead").append("tr").selectAll("th").data(l).enter().append("th").style("background",r[n].thead).text(function(t){return t}).on("click",function(t,e){c.attr("class","header"),a?(1===e?d.sort(function(e,n){return e[t]<n[t]?-1:e[t]>n[t]?1:0}):d.sort(function(e,n){return+e[t].replace(/[^0-9]+/g,"")-+n[t].replace(/[^0-9]+/g,"")}),a=!1,this.className="aes"):(1===e?d.sort(function(e,n){return n[t]<e[t]?-1:n[t]>e[t]?1:0}):d.sort(function(e,n){return+n[t].replace(/[^0-9]+/g,"")-+e[t].replace(/[^0-9]+/g,"")}),a=!0,this.className="des")}),d=s.append("tbody").selectAll("tr").data(i).enter().append("tr").style("background",r[n].tbody);d.selectAll("td").data(function(t){return l.map(function(e){return{value:t[e],name:e}})}).enter().append("td").attr("data-th",function(t){return t.name}).text(function(t){return t.value})})}e(".dropdown-visible").off().on("click",function(){e(".dropdown-hidden").toggleClass("visibility-visible")}),e(".dropdown-item").off().on("click",function(){a=e(this).data("value"),e(".dropdown-value").text(a),e(".dropdown-hidden").toggleClass("visibility-visible"),o(a,"strengths"),o(a,"weaknesses"),o(a,"opportunities"),o(a,"threats")}),o(a,"strengths"),o(a,"weaknesses"),o(a,"opportunities"),o(a,"threats"),e.isFunction(i)&&i()}(0,n)}}(d3,$,window),function(t,e,n){n.vibrant||(n.vibrant={}),n.loadTrends=function(a){!function(a,r){var o="Austin";function s(a,r){var o=new i({element:t.select("#trends-bubble-wrapper").node(),data:a,year:r});e(n).on("resize",function(){return o.draw()})}function l(n){t.queue(2).defer(t.csv,"./data/"+n+"_Table.csv").defer(t.csv,"./data/"+n+"_Master_Traded.csv").await(function(n,i,a){if(n)throw n;var r=[],o={},l=(a.reduce(function(t,e,n){return t[e.naics]=e,t},{}),i.reduce(function(t,e,n){return t[e.NAICS]=e,t},{})),c=t.keys(a[0]).filter(function(t){return-1!==t.indexOf("L_T_")}).map(function(t){return t=+t.replace(/[^0-9]+/g,""),o[t]=[],t});c.sort(function(t,e){return t-e}),a.map(function(t,e){r.push({Industry:t.Label,Employees:l[t.naics]?l[t.naics].Employees:"","Relative Size (RS)":l[t.naics]?l[t.naics]["Relative Size (RS)"]:""+e,"Local Trend":t.Local_Trend,"Natâ€™l Trend":t.Natl_Trend}),c.map(function(n){o[n].push({Industry:t.Label,"Local Trend":+t["L_T_"+n]||0,"National Trend":+t["N_T_"+n]||0,"Relative Size (RS)":l[t.naics]?+l[t.naics]["Relative Size (RS)"]:""+e})})}),r.sort(function(t,e){return+e.Employees-+t.Employees}),c.map(function(t){o[t]=o[t].splice(0,50)}),e("#trends-time").attr("min",c[0]).attr("max",c[c.length-1]).on("input change",function(){var t=e(this).val();s(o[t],t)}),function(e){var n=!0,i=t.select("#trends-table-wrapper");i.selectAll("*").remove();var a=i.append("table"),r=t.keys(e[0]),o=a.append("thead").append("tr").selectAll("th").data(r).enter().append("th").text(function(t){return t}).on("click",function(t,e){o.attr("class","header"),n?(0===e?s.sort(function(e,n){return e[t]<n[t]?-1:e[t]>n[t]?1:0}):s.sort(function(e,n){return+e[t].replace(/[^0-9]+/g,"")-+n[t].replace(/[^0-9]+/g,"")}),n=!1,this.className="aes"):(0===e?s.sort(function(e,n){return n[t]<e[t]?-1:n[t]>e[t]?1:0}):s.sort(function(e,n){return+n[t].replace(/[^0-9]+/g,"")-+e[t].replace(/[^0-9]+/g,"")}),n=!0,this.className="des"),a.selectAll("tr").style("background",function(t,e){return e%2?"#eee":"#fff"})}),s=a.append("tbody").selectAll("tr").data(e).enter().append("tr").style("background",function(t,e){return e%2?"#fff":"#eee"});s.selectAll("td").data(function(t){return r.map(function(e){return{value:t[e],name:e}})}).enter().append("td").attr("data-th",function(t){return t.name}).text(function(t){return t.value})}(r),s(o[c[0]],c[0])})}e(".dropdown-visible").off().on("click",function(){e(".dropdown-hidden").toggleClass("visibility-visible")}),e(".dropdown-item").off().on("click",function(){o=e(this).data("value"),e(".dropdown-value").text(o),e(".dropdown-hidden").toggleClass("visibility-visible"),l(o)}),function(){var e=t.select("#trends-bubble-legend div");e.selectAll("*").remove();var n=e.append("div").attr("class","trends-bubble-legend-tooltip").style("visibility","hidden");[{src:"group1.jpg",tooltip:"Ag, Fishing, Hunting, & Forestry"},{src:"group2.jpg",tooltip:"Mining, Utilities, & Construction"},{src:"group3.jpg",tooltip:"Manufacturing"},{src:"group4.jpg",tooltip:"Wholesale, Transport, & Warehousing"},{src:"group5.jpg",tooltip:"Services"},{src:"group6.jpg",tooltip:"Education & Healthcare"},{src:"group7.jpg",tooltip:"Arts & Hospitality"},{src:"group8.jpg",tooltip:"Other"}].map(function(t,i){e.append("img").attr("src","img dump/"+t.src).attr("alt","legend").style("cursor","pointer").on("mouseover",function(){n.text(t.tooltip),n.style("visibility","visible")}).on("mousemove",function(){n.style("top",24*i+5+"px").style("right","40px")}).on("mouseout",function(){return n.style("visibility","hidden")})})}(),l(o),e.isFunction(r)&&r()}(0,a)};var i=function(){function e(n){_classCallCheck(this,e),this.data=n.data,this.year=n.year||"",this.element=n.element,this.color=t.scaleOrdinal(t.schemeCategory20),this.draw()}return _createClass(e,[{key:"draw",value:function(){this.width=this.element.offsetWidth||400,this.height=this.element.offsetHeight||400;var e=Math.min(this.width,this.height);this.width=e,this.height=e,this.margin={top:40,right:40,bottom:40,left:40},this.width=this.width-(this.margin.left+this.margin.right),this.height=this.height-(this.margin.top+this.margin.bottom);var n=t.select(this.element);n.selectAll(".item").remove(),this.padding=n.node().getBoundingClientRect();var i=n.append("svg").attr("class","item").attr("width",this.width+(this.margin.left+this.margin.right)).attr("height",this.height+(this.margin.top+this.margin.bottom));this.container=i.append("g").attr("width",this.width).attr("height",this.height).attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.tooltip=n.append("div").attr("class","item trends-bubble-tooltip").style("visibility","hidden"),this.createBubbles(this.data)}},{key:"setData",value:function(t){this.data=t,this.draw()}},{key:"createBubbles",value:function(e){var n=this,i=this.tooltip,a=t.scaleLinear().range([0,this.width]),r=t.scaleLinear().range([this.height,0]),o=t.scaleLinear().range([2,18]).domain(t.extent(e,function(t){return+t["Relative Size (RS)"]})),s=t.min(e,function(t){return t["National Trend"]}),l=t.max(e,function(t){return t["National Trend"]}),c=Math.max(Math.abs(s),Math.abs(l));a.domain([-c,+c]);var d=t.min(e,function(t){return t["Local Trend"]}),u=t.max(e,function(t){return t["Local Trend"]}),h=Math.max(Math.abs(d),Math.abs(u));r.domain([-h,+h]);var p=Math.min(h,c);this.container.append("g").attr("class","x-axis axis").attr("transform","translate(0,"+this.height+")").call(t.axisBottom(a).tickSize(-this.height)),this.container.append("g").attr("class","y-axis axis").call(t.axisLeft(r).tickSize(-this.width)),this.container.append("rect").attr("class","around").attr("x",0).attr("y",0).attr("height",this.height).attr("width",this.width),this.container.append("line").attr("class","like-axis").attr("x1",0).attr("x2",this.width).attr("y1",r(0)).attr("y2",r(0)),this.container.append("line").attr("class","like-axis").attr("x1",a(0)).attr("x2",a(0)).attr("y1",0).attr("y2",this.height),this.container.append("text").attr("class","label-axis label-y-axis").attr("text-anchor","middle").attr("transform","translate("+(15-this.margin.left)+","+this.height/2+")rotate(-90)").text("Local Trend"),this.container.append("text").attr("class","label-axis label-x-axis").attr("text-anchor","middle").attr("transform","translate("+this.width/2+","+(this.height-(15-this.margin.bottom))+")").text("National Trend");this.container.append("text").attr("class","year label").attr("text-anchor","end").attr("y",this.height-5).attr("x",this.width-5).text(this.year);var f=this.padding;this.container.selectAll(".bubble").data(e).enter().append("circle").attr("class","bubble").style("stroke","#000").style("stroke-width","0").style("fill",function(t,e){return n.color(e)}).attr("cy",function(t){return r(t["Local Trend"])}).attr("cx",function(t){return a(t["National Trend"])}).attr("r",function(t){return o(t["Relative Size (RS)"])}).style("cursor","pointer").on("mouseover",function(t){i.html("<p>"+t.Industry+"</p><p>Relative Size: "+t["Relative Size (RS)"]+"</p><p>Local Trend: "+t["Local Trend"]+"</p><p>National Trend: "+t["National Trend"]+"</p>"),i.style("visibility","visible")}).on("mousemove",function(e){i.style("top",r(e["Local Trend"])+"px").style("left",t.event.pageX-f.left+10+"px")}).on("mouseout",function(){return i.style("visibility","hidden")}),this.container.append("line").attr("class","like-diagonal").attr("x1",a(-p)).attr("x2",a(+p)).attr("y1",r(-p)).attr("y2",r(+p))}}]),e}()}(d3,$,window),$(function(){window.vibrant||(window.vibrant={});var t,e=/INPUT|SELECT|TEXTAREA/i;$(document).bind("keydown keypress",function(t){8==t.which&&(!e.test(t.target.tagName)||t.target.disabled||t.target.readOnly)&&t.preventDefault()}),window.onpopstate=function(t){$(document).ready(function(){i(!0),loadPage({})})},$(document).ready(function(){t=$("#loading-wrapper"),i(!0),$("#navigation .link-to").off().on("click",function(t){t.stopPropagation(),t.preventDefault();var e=$(this).data("link-to");loadPage({page:e})}),loadPage({})});var n={activity:{page:"activity",nav:"graphs",event:window.loadActivity,nextAjax:function(){t.addClass("hidden")}},trends:{page:"trends",nav:"graphs",event:window.loadTrends,nextAjax:function(){t.addClass("hidden")}},local:{page:"local",nav:"graphs",event:window.loadLocal,nextAjax:function(){t.addClass("hidden")}},swot:{page:"swot",nav:"graphs",event:window.loadSwot,nextAjax:function(){t.addClass("hidden")}}};function i(t){var e=$("#header").height()+$("#sub-navigation-wrapper").height();$("#page-wrapper").css("min-height",$(window).height()-e)}window.loadPage=function e(a){var r=a.page||function(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}("page",window.location.search)||"activity";"nolink"!==r&&(t.removeClass("hidden"),r=r.replace("#","").replace(/[^a-zA-Z]+/g,""),n[r]?r&&(window.history.pushState({page:r},r,"?page="+r),"graphs"===n[r].nav&&($("#navigation .link-to").removeClass("link-to-active"),$("#navigation .link-to-"+n[r].nav).addClass("link-to-active"),$("#sub-navigation-wrapper").empty().load("graphs_nav.html",function(t){$("#sub-navigation-wrapper .link-to").removeClass("link-to-active"),$("#sub-navigation-wrapper .link-to-"+r).addClass("link-to-active"),$("#sub-navigation-wrapper .link-to").off().on("click",function(t){t.stopPropagation(),t.preventDefault();var n=$(this).data("link-to");"nolink"!==n&&($("#sub-navigation-wrapper .link-to").removeClass("link-to-active"),$("#sub-navigation-wrapper .link-to-"+n).addClass("link-to-active"),e({page:n}))}),i(!1)})),$("#page-wrapper").empty().load(n[r].page+".html",function(t){$.isFunction(n[r].callback)&&n[r].callback(),$.isFunction(n[r].prevAjax)&&n[r].prevAjax(),$.isFunction(n[r].event)&&n[r].event(n[r].nextAjax)})):window.open(window.location.origin+"?page=activity","_self"))},$(window).on("resize",i)});